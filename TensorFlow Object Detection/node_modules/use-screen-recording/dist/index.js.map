{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import * as React from \"react\";\n\nconst defaultDisplayMediaOptions = {\n  audio: false,\n  video: { cursor: \"always\" },\n};\n\nexport default function useScreenRecording({\n  displayMediaOptions = defaultDisplayMediaOptions,\n  onEnd = () => {},\n  onError = () => {},\n  onStart = () => {},\n} = {}) {\n  const [captureStream, setCaptureStream] = React.useState(null);\n  const [error, setError] = React.useState(null);\n  const [mediaRecorder, setMediaRecorder] = React.useState(null);\n  const [isRecording, setIsRecording] = React.useState(false);\n  const [recording, setRecording] = React.useState(null);\n  const stopRecording = () => {\n    try {\n      setIsRecording(false);\n      mediaRecorder.stop();\n      captureStream.getTracks().forEach((track) => track.stop());\n    } catch (e) {\n      onError(e);\n      setError(e);\n    }\n  };\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getDisplayMedia(\n        displayMediaOptions\n      );\n      setIsRecording(true);\n      stream.getTracks().forEach((track) => {\n        track.onended = stopRecording;\n      });\n      setCaptureStream(stream);\n      const recorder = new MediaRecorder(stream);\n      recorder.ondataavailable = (event) => {\n        onEnd(event);\n        setRecording(event.data);\n      };\n      recorder.start();\n      setMediaRecorder(recorder);\n      onStart({ stream, recorder });\n    } catch (e) {\n      setIsRecording(false);\n      onError(e);\n      setError(e);\n    }\n  };\n  const toggleRecording = () =>\n    isRecording ? stopRecording() : startRecording();\n\n  return {\n    captureStream,\n    error,\n    isRecording,\n    mediaRecorder,\n    recording,\n    startRecording,\n    stopRecording,\n    toggleRecording,\n  };\n}\n"],"names":["defaultDisplayMediaOptions","audio","video","cursor","useScreenRecording","displayMediaOptions","onEnd","onError","onStart","React","captureStream","setCaptureStream","error","setError","mediaRecorder","setMediaRecorder","isRecording","setIsRecording","recording","setRecording","stopRecording","stop","getTracks","forEach","track","e","startRecording","navigator","mediaDevices","getDisplayMedia","stream","onended","recorder","MediaRecorder","ondataavailable","event","data","start","toggleRecording"],"mappings":"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"}