{"version":3,"sources":["index.tsx"],"names":["NativeModules","Dimensions","RecordScreen","RS","ReactNativeRecordScreenClass","get","width","height","setup","config","conf","Object","assign","mic","_screenWidth","_screenHeight","startRecording","Promise","resolve","reject","then","catch","stopRecording","clean","ReactNativeRecordScreen"],"mappings":";;AAAA,SAASA,aAAT,EAAwBC,UAAxB,QAA0C,cAA1C;AAiCA,MAAM;AAAEC,EAAAA;AAAF,IAAmBF,aAAzB;AAEA,MAAMG,EAAE,GAAGD,YAAX;;AAEA,MAAME,4BAAN,CAAmC;AAAA;AAAA,0CACVH,UAAU,CAACI,GAAX,CAAe,QAAf,EAAyBC,KADf;;AAAA,2CAETL,UAAU,CAACI,GAAX,CAAe,QAAf,EAAyBE,MAFhB;AAAA;;AAIjCC,EAAAA,KAAK,CAACC,MAA8B,GAAG,EAAlC,EAA4C;AAC/C,UAAMC,IAAI,GAAGC,MAAM,CAACC,MAAP,CACX;AACEC,MAAAA,GAAG,EAAE,IADP;AAEEP,MAAAA,KAAK,EAAE,KAAKQ,YAFd;AAGEP,MAAAA,MAAM,EAAE,KAAKQ;AAHf,KADW,EAMXN,MANW,CAAb;AAQAN,IAAAA,EAAE,CAACK,KAAH,CAASE,IAAT;AACD;;AAED,QAAMM,cAAN,CACEP,MAA8B,GAAG,EADnC,EAEmC;AACjC,SAAKD,KAAL,CAAWC,MAAX;AACA,WAAO,IAAIQ,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtChB,MAAAA,EAAE,CAACa,cAAH,GAAoBI,IAApB,CAAyBF,OAAzB,EAAkCG,KAAlC,CAAwCF,MAAxC;AACD,KAFM,CAAP;AAGD;;AAEDG,EAAAA,aAAa,GAA+B;AAC1C,WAAO,IAAIL,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtChB,MAAAA,EAAE,CAACmB,aAAH,GAAmBF,IAAnB,CAAwBF,OAAxB,EAAiCG,KAAjC,CAAuCF,MAAvC;AACD,KAFM,CAAP;AAGD;;AAEDI,EAAAA,KAAK,GAAoB;AACvB,WAAO,IAAIN,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtChB,MAAAA,EAAE,CAACoB,KAAH,GAAWH,IAAX,CAAgBF,OAAhB,EAAyBG,KAAzB,CAA+BF,MAA/B;AACD,KAFM,CAAP;AAGD;;AAnCgC;;AAsCnC,MAAMK,uBAAuB,GAAG,IAAIpB,4BAAJ,EAAhC;AAEA,eAAeoB,uBAAf","sourcesContent":["import { NativeModules, Dimensions } from 'react-native';\n\nexport type RecordingStartResponse = 'started';\n\nexport type RecordScreenConfigType = {\n  mic?: boolean;\n};\n\nexport type RecordingSuccessResponse = {\n  status: 'success';\n  result: {\n    outputURL: string;\n  };\n};\n\nexport type RecordingErrorResponse = {\n  status: 'error';\n  result: any;\n};\n\nexport type RecordingResponse =\n  | RecordingSuccessResponse\n  | RecordingErrorResponse;\n\ntype RecordScreenType = {\n  setup(config: RecordScreenConfigType): void;\n  startRecording(\n    config?: RecordScreenConfigType\n  ): Promise<RecordingStartResponse>;\n  stopRecording(): Promise<RecordingResponse>;\n  clean(): Promise<string>;\n};\n\nconst { RecordScreen } = NativeModules;\n\nconst RS = RecordScreen as RecordScreenType;\n\nclass ReactNativeRecordScreenClass {\n  private _screenWidth = Dimensions.get('window').width;\n  private _screenHeight = Dimensions.get('window').height;\n\n  setup(config: RecordScreenConfigType = {}): void {\n    const conf = Object.assign(\n      {\n        mic: true,\n        width: this._screenWidth,\n        height: this._screenHeight,\n      },\n      config\n    );\n    RS.setup(conf);\n  }\n\n  async startRecording(\n    config: RecordScreenConfigType = {}\n  ): Promise<RecordingStartResponse> {\n    this.setup(config);\n    return new Promise((resolve, reject) => {\n      RS.startRecording().then(resolve).catch(reject);\n    });\n  }\n\n  stopRecording(): Promise<RecordingResponse> {\n    return new Promise((resolve, reject) => {\n      RS.stopRecording().then(resolve).catch(reject);\n    });\n  }\n\n  clean(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      RS.clean().then(resolve).catch(reject);\n    });\n  }\n}\n\nconst ReactNativeRecordScreen = new ReactNativeRecordScreenClass();\n\nexport default ReactNativeRecordScreen;\n"]}